<type access-modifier="private" name="AppEdit" display-name="AppEdit" uuid="b9b929a8-3934-4822-919a-13ae874558fb" base-type="Form" base-type-id="ffaf5544-6200-45f4-87ec-9dd24558a9d5" ver="4">
	<designed target="X" value="0" ver="4"/>
	<designed target="Y" value="0" ver="4"/>
	<designed target="ZValue" value="0" ver="4"/>
	<designed target="Rotation" value="0" ver="4"/>
	<designed target="Scale" value="1" ver="4"/>
	<designed target="Visible" value="true" ver="4"/>
	<designed target="Opacity" value="1" ver="4"/>
	<designed target="Enabled" value="true" ver="4"/>
	<designed target="Tooltip" value="" ver="4"/>
	<designed target="Width" value="847" ver="4"/>
	<designed target="Height" value="400" ver="4"/>
	<designed target="PenColor" value="4278190080" ver="4"/>
	<designed target="PenStyle" value="0" ver="4"/>
	<designed target="PenWidth" value="1" ver="4"/>
	<designed target="BrushColor" value="4293980400" ver="4"/>
	<designed target="BrushStyle" value="1" ver="4"/>
	<designed target="WindowX" value="0" ver="4"/>
	<designed target="WindowY" value="0" ver="4"/>
	<designed target="WindowWidth" value="847" ver="4"/>
	<designed target="WindowHeight" value="400" ver="4"/>
	<designed target="WindowCaption" value="MainForm" ver="4"/>
	<designed target="ShowWindowCaption" value="true" ver="4"/>
	<designed target="ShowWindowMinimize" value="true" ver="4"/>
	<designed target="ShowWindowMaximize" value="true" ver="4"/>
	<designed target="ShowWindowClose" value="true" ver="4"/>
	<designed target="AlwaysOnTop" value="false" ver="4"/>
	<designed target="WindowSizeMode" value="0" ver="4"/>
	<designed target="WindowBorderStyle" value="1" ver="4"/>
	<designed target="WindowState" value="0" ver="4"/>
	<designed target="WindowScalingMode" value="0" ver="4"/>
	<designed target="MonitorNumber" value="0" ver="4"/>
	<designed target="WindowPosition" value="0" ver="4"/>
	<designed target="WindowCloseMode" value="0" ver="4"/>
	<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Opened">
		<body kind="om">
			<![CDATA[RightsEditor.InMemoryTable.InitTable();
RightsEditor.Table_1.TableDecorator_1.JsonDecorator = RightsEditor.GetJsonDecorator();

if(inputAppID != ""){
	Application.Load(inputAppID);
	header.AppNameText.Text = inputAppID;
	SystemCommands.GoTo.doBlockingControll();
}

UpdateLayout();]]>
		</body>
	</do-on>
	<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="Closed">
		<body kind="om">
			<![CDATA[SystemCommands.DoSave.CanExecute = false;]]>
		</body>
	</do-on>
	<object access-modifier="private" name="DebugTool_1" display-name="DebugTool_1" uuid="e463574c-3dd7-413c-b872-3673bb2015dd" base-type="DebugTool" base-type-id="43946044-139a-43f4-a7b8-19a6074ffc56" ver="4"/>
	<object access-modifier="private" name="header" display-name="header" uuid="40cc1fde-e3ad-48b9-9eb2-799d44b14456" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="4">
		<designed target="X" value="0" ver="4"/>
		<designed target="Y" value="0" ver="4"/>
		<designed target="ZValue" value="0" ver="4"/>
		<designed target="Rotation" value="0" ver="4"/>
		<designed target="Scale" value="1" ver="4"/>
		<designed target="Visible" value="true" ver="4"/>
		<designed target="Opacity" value="1" ver="4"/>
		<designed target="Enabled" value="true" ver="4"/>
		<designed target="Tooltip" value="" ver="4"/>
		<designed target="Width" value="847" ver="4"/>
		<designed target="Height" value="30" ver="4"/>
		<designed target="RoundingRadius" value="0" ver="4"/>
		<designed target="PenColor" value="4278190080" ver="4"/>
		<designed target="PenStyle" value="0" ver="4"/>
		<designed target="PenWidth" value="1" ver="4"/>
		<designed target="BrushColor" value="4278190080" ver="4"/>
		<designed target="BrushStyle" value="0" ver="4"/>
		<object access-modifier="private" name="LayoutWeight" display-name="LayoutWeight" uuid="5d7117a1-4b71-4555-8be2-0b1c209b4015" base-type="LayoutWeight" base-type-id="8f3d975c-9645-4288-9406-a8dda0527008" ver="4">
			<designed target="Weight" value="30" ver="4"/>
		</object>
		<object access-modifier="private" name="appNameCaption" display-name="appNameCaption" uuid="cf5c72b5-b731-4b69-b29d-e8aaf4184ec1" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="4">
			<designed target="X" value="0" ver="4"/>
			<designed target="Y" value="0" ver="4"/>
			<designed target="ZValue" value="0" ver="4"/>
			<designed target="Rotation" value="0" ver="4"/>
			<designed target="Scale" value="1" ver="4"/>
			<designed target="Visible" value="true" ver="4"/>
			<designed target="Opacity" value="1" ver="4"/>
			<designed target="Enabled" value="true" ver="4"/>
			<designed target="Tooltip" value="" ver="4"/>
			<designed target="Width" value="150" ver="4"/>
			<designed target="Height" value="30" ver="4"/>
			<designed target="Text" value="Имя приложения: " ver="4"/>
			<designed target="Font" value="PT Sans,9,-1,5,50,0,0,0,0,0,Обычный" ver="4"/>
			<designed target="FontColor" value="4278190080" ver="4"/>
			<designed target="TextAlignment" value="132" ver="4"/>
			<object access-modifier="private" name="LayoutWeight_1" display-name="LayoutWeight_1" uuid="065cb912-2d85-4b56-89df-e4f0df845584" base-type="LayoutWeight" base-type-id="8f3d975c-9645-4288-9406-a8dda0527008" ver="4">
				<designed target="Weight" value="150" ver="4"/>
			</object>
		</object>
		<object access-modifier="private" name="AppNameText" display-name="AppNameText" uuid="3ce84298-ec04-4f6a-8ab4-70f38161bd66" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="4">
			<designed target="X" value="150" ver="4"/>
			<designed target="Y" value="0" ver="4"/>
			<designed target="ZValue" value="0" ver="4"/>
			<designed target="Rotation" value="0" ver="4"/>
			<designed target="Scale" value="1" ver="4"/>
			<designed target="Visible" value="true" ver="4"/>
			<designed target="Opacity" value="1" ver="4"/>
			<designed target="Enabled" value="true" ver="4"/>
			<designed target="Tooltip" value="" ver="4"/>
			<designed target="Width" value="697" ver="4"/>
			<designed target="Height" value="30" ver="4"/>
			<designed target="Text" value="appname" ver="4"/>
			<designed target="Font" value="PT Sans,10,-1,5,75,0,0,0,0,0,Полужирный" ver="4"/>
			<designed target="FontColor" value="4278190080" ver="4"/>
			<designed target="TextAlignment" value="129" ver="4"/>
			<object access-modifier="private" name="LayoutWeight_1" display-name="LayoutWeight_1" uuid="28740752-50bd-41fd-9f15-7e7d18c80fcc" base-type="LayoutWeight" base-type-id="8f3d975c-9645-4288-9406-a8dda0527008" ver="4">
				<designed target="Weight" value="697" ver="4"/>
			</object>
			<init target="Text" ver="4" value=""/>
		</object>
		<object access-modifier="private" name="LinearLayout_1" display-name="LinearLayout_1" uuid="1f290652-35f8-4204-b9bf-95237478f4a8" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="4">
			<designed target="Orientation" value="1" ver="4"/>
			<designed target="Gap" value="0" ver="4"/>
		</object>
		<do access-modifier="private" name="UpdateLayout" display-name="UpdateLayout" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="om">
				<![CDATA[AppNameText.LayoutWeight_1 = Width - appNameCaption.LayoutWeight_1;]]>
			</body>
		</do>
	</object>
	<object access-modifier="private" name="private" display-name="private" uuid="3c2b30a8-e374-40c0-880b-341ac10578c1" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="4">
		<designed target="X" value="0" ver="4"/>
		<designed target="Y" value="0" ver="4"/>
		<designed target="ZValue" value="0" ver="4"/>
		<designed target="Rotation" value="0" ver="4"/>
		<designed target="Scale" value="1" ver="4"/>
		<designed target="Visible" value="true" ver="4"/>
		<designed target="Opacity" value="1" ver="4"/>
		<designed target="Enabled" value="true" ver="4"/>
		<designed target="Tooltip" value="" ver="4"/>
		<designed target="Width" value="0" ver="4"/>
		<designed target="Height" value="400" ver="4"/>
		<designed target="RoundingRadius" value="0" ver="4"/>
		<designed target="PenColor" value="4278190080" ver="4"/>
		<designed target="PenStyle" value="0" ver="4"/>
		<designed target="PenWidth" value="1" ver="4"/>
		<designed target="BrushColor" value="0xff000000" ver="4"/>
		<designed target="BrushStyle" value="0" ver="4"/>
		<object access-modifier="private" name="DialogResult" display-name="DialogResult" uuid="a8b765e2-3044-4ac4-b754-12f94b17911b" base-type="DialogResult" base-type-id="edf8f921-912c-457b-838d-25607e6715bb" ver="4"/>
		<object access-modifier="private" name="SelectedRow" display-name="SelectedRow" uuid="d200d948-1c18-402e-8d13-61e5c3b1f52a" base-type="notifying_int4" base-type-id="5ccca629-a45d-46c8-a56c-83ecde8126f7" ver="4">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value != -1) {
	Commands.DoDeleteToken.CanExecute = true;
	Commands.DoChangeToken.CanExecute = true;
} else {
	Commands.DoDeleteToken.CanExecute = false;
	Commands.DoChangeToken.CanExecute = false;
}
]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="UpdateView" display-name="UpdateView" uuid="c285e2c4-dc8a-4a7f-8fdf-94a15e051baf" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value) {
	SystemCommands.DoUpdateLayout = false;
	here.WindowWidth = TypeConvert.ToInt4(SystemCommands.DoUpdateLayout.Width);
	here.WindowHeight = TypeConvert.ToInt4(SystemCommands.DoUpdateLayout.Height);
	UpdateLayout();
}]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="Save" display-name="Save" uuid="17007d43-efe3-4b31-bb48-3eb94bec8449" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
			<object access-modifier="private" name="needSave" display-name="needSave" uuid="54d6314f-8e40-4d49-8e22-c3c74786fcc8" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
					<body kind="om">
						<![CDATA[SystemCommands.DoSave.CanExecute = value;
]]>
					</body>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value) {
	SystemCommands.DoSave = false;
	Application.Save();
	SystemCommands.GoTo.doBlockingControll();
}]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="DeleteToken" display-name="DeleteToken" uuid="8c2b30f3-4099-49fb-92dc-df023fd1024f" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value) {
Commands.DoDeleteToken = false;
SelectedTokenID:string = Variant.ToString(RightsEditor.InMemoryTable.GetCellData(SelectedRow,0),"");
	if (SelectedTokenID != "") {
		Application.DeleteToken(SelectedTokenID);
		SelectedRow = -1;
		private.LoadAppRightsToTable(Application.GetTokensList());
		Save.needSave = true;
	}
}]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="ChangeToken" display-name="ChangeToken" uuid="eb591149-2c26-40ce-a505-e10af566cf74" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
			<object access-modifier="private" name="ShowChangeTokenDialog" display-name="ShowChangeTokenDialog" uuid="57facd9b-cd41-4ec3-9cbc-5fb97de6d370" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
				<designed target="Enabled" value="true" ver="4"/>
				<designed target="InvokeTrigger" value="false" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="683ab574-a5c4-42fc-ba0a-4980285f8cd2" base-type="ChangeRight" base-type-id="27d54caf-8c1a-4c8b-a768-b1a5005c1b78" ver="4">
						<init target="OkAction" ver="4" ref="OnComplete"/>
						<init target="NameResult" ver="4" ref="TokenName"/>
						<init target="DescriptionResult" ver="4" ref="TokenDescription"/>
						<designed target="WindowCaption" value="Изменить право" ver="4"/>
					</object>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value) {
	Commands.DoChangeToken = false;
	TokenInputDialogClearData();
	TokenName.InputText = Variant.ToString(RightsEditor.InMemoryTable.GetCellData(SelectedRow,2),"");
	currentTokenName = TokenName.InputText;
	TokenDescription.InputText = Variant.ToString(RightsEditor.InMemoryTable.GetCellData(SelectedRow,3),"");
	ShowChangeTokenDialog.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="0e68c769-0c19-428b-bc12-e9020e9b57e2" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
				<designed target="Enabled" value="true" ver="4"/>
				<designed target="InvokeTrigger" value="false" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[/*
	получить tokenName, tokenType, tokenDescription по row выбранного токена
	сформировать Application.ChangeToken
	выставить флаг на сохранение

*/

selectedTokenID:string = Variant.ToString(RightsEditor.InMemoryTable.GetCellData(SelectedRow,0),"");
selectedTokenType:string = Variant.ToString(RightsEditor.InMemoryTable.GetCellData(SelectedRow,1),"");
tokenTypeCode:uint1;

if (selectedTokenType == "bool")
	tokenTypeCode = 1;
else if (selectedTokenType == "string")
	tokenTypeCode = 0;
	
if (selectedTokenID != ""){
	Application.ChangeToken(selectedTokenID, tokenTypeCode, TokenName.Value, TokenDescription.Value);
	private.LoadAppRightsToTable(Application.GetTokensList());
	Save.needSave = true;
}

SelectedRow = -1;]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="currentTokenName" display-name="currentTokenName" uuid="23bd2cbc-cab8-4f91-aea4-c45676625ba3" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="4"/>
		</object>
		<object access-modifier="private" name="CreateBoolToken" display-name="CreateBoolToken" uuid="2fe9f2a0-9408-4f85-aa3b-d6cf623bc700" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
			<object access-modifier="private" name="ShowCreateBoolTokenDialog" display-name="ShowCreateBoolTokenDialog" uuid="d29b5a65-2bb6-41d6-9ee4-cb114a1adb1d" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
				<designed target="Enabled" value="true" ver="4"/>
				<designed target="InvokeTrigger" value="false" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="d8fac7f3-9c17-49fd-a1d5-a6fe1fd83267" base-type="ChangeRight" base-type-id="27d54caf-8c1a-4c8b-a768-b1a5005c1b78" ver="4">
						<init target="NameResult" ver="4" ref="TokenName"/>
						<init target="DescriptionResult" ver="4" ref="TokenDescription"/>
						<init target="OkAction" ver="4" ref="OnComplete"/>
						<designed target="WindowCaption" value="Добавить логическое право" ver="4"/>
					</object>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value){
	Commands.DoCreateBoolToken = false;
	TokenInputDialogClearData();
	ShowCreateBoolTokenDialog.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="1fc79c4c-2e13-497b-b991-f27f11da1c46" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
				<designed target="Enabled" value="true" ver="4"/>
				<designed target="InvokeTrigger" value="false" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[//TokenType == bool - 1 
Application.CreateToken(1, TokenName.Value, TokenDescription.Value);
private.LoadAppRightsToTable(Application.GetTokensList());
Save.needSave = true;
]]>
					</body>
				</do-on>
			</object>
		</object>
		<object access-modifier="private" name="CreateStringToken" display-name="CreateStringToken" uuid="e0e676ab-700c-419d-97d5-ed12581896a7" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="4">
			<object access-modifier="private" name="ShowCreateStringTokenDialog" display-name="ShowCreateStringTokenDialog" uuid="8c7c3497-446d-41d2-8c65-ce0bebc43bce" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
				<designed target="Enabled" value="true" ver="4"/>
				<designed target="InvokeTrigger" value="false" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
					<object access-modifier="private" uuid="3c364a8a-b6b8-4764-9926-b09c9845cbc9" base-type="ChangeRight" base-type-id="27d54caf-8c1a-4c8b-a768-b1a5005c1b78" ver="4">
						<init target="NameResult" ver="4" ref="TokenName"/>
						<init target="DescriptionResult" ver="4" ref="TokenDescription"/>
						<init target="OkAction" ver="4" ref="OnComplete"/>
						<designed target="WindowCaption" value="Добавить строковое право" ver="4"/>
					</object>
				</do-on>
			</object>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
				<body kind="om">
					<![CDATA[if (value){
	Commands.DoCreateStringToken = false;
	TokenInputDialogClearData();
	ShowCreateStringTokenDialog.Invoke();
}]]>
				</body>
			</do-on>
			<object access-modifier="private" name="OnComplete" display-name="OnComplete" uuid="2d73daf1-f7e0-4c89-a159-de70090cd9ad" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
				<designed target="Enabled" value="true" ver="4"/>
				<designed target="InvokeTrigger" value="false" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked">
					<body kind="om">
						<![CDATA[//TokenType == string - 0 
Application.CreateToken(0, TokenName.Value, TokenDescription.Value);
private.LoadAppRightsToTable(Application.GetTokensList());
Save.needSave = true;]]>
					</body>
				</do-on>
			</object>
		</object>
		<do access-modifier="private" name="LoadAppRightsToTable" display-name="LoadAppRightsToTable" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="javascript">
				<![CDATA[if (InputRights != ""){
	if (RightsEditor.InMemoryTable.GetColumnCount() == 0) {RightsEditor.InMemoryTable.InitTable();}
	try {
		RightsEditor.InMemoryTable.Clear();
		var rightsList = JSON.parse(InputRights).data;
		if (rightsList.length != 0) {
			rightsList = rightsList.sort((a, b) => a.tokenName.toString().toLowerCase() > b.tokenName.toString().toLowerCase() ? 1 : -1);
			RightsEditor.InMemoryTable.InsertRows(0, rightsList.length);
			for (var i = 0; i<rightsList.length; i++) {
				RightsEditor.InMemoryTable.SetCellData(i, 0 , rightsList[i].tokenID);
				RightsEditor.InMemoryTable.SetCellData(i, 1 , rightsList[i].tokenType);
				RightsEditor.InMemoryTable.SetCellData(i, 2 , rightsList[i].tokenName);
				RightsEditor.InMemoryTable.SetCellData(i, 3 , rightsList[i].tokenDescription);
			}
		} 
	} catch (err){
		return;
	}
}]]>
			</body>
			<param access-modifier="private" name="InputRights" display-name="" uuid="6c1bdb56-cbe4-4888-a04b-5bbb4e8f3d85" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="4"/>
		</do>
		<do-trace access-modifier="private" target="CreateBoolToken" ver="5">
			<body>
				<![CDATA[Commands.DoCreateBoolToken]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="CreateStringToken" ver="5">
			<body>
				<![CDATA[Commands.DoCreateStringToken]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="DeleteToken" ver="5">
			<body>
				<![CDATA[Commands.DoDeleteToken]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="ChangeToken" ver="5">
			<body>
				<![CDATA[Commands.DoChangeToken]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="Save" ver="5">
			<body>
				<![CDATA[SystemCommands.DoSave]]>
			</body>
		</do-trace>
		<do-trace access-modifier="private" target="UpdateView" ver="5">
			<body>
				<![CDATA[SystemCommands.DoUpdateLayout]]>
			</body>
		</do-trace>
		<object access-modifier="private" name="TokenName" display-name="TokenName" uuid="c1b5de1b-963e-47e6-b3ae-8afa08f69cfe" base-type="InputDialogResult" base-type-id="cdcda119-652b-45ed-bfc4-8cc21b98730d" ver="4">
			<object access-modifier="private" name="inputTextChanged" display-name="inputTextChanged" uuid="072f5ac3-c071-46c5-a876-514e5689b2e1" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="4">
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="ValueChanged">
					<body kind="javascript">
						<![CDATA[// Проверка дублирования имён

TokenName.Error = "";
if (value != ""){
	try {
		var tokenList = JSON.parse(Application.GetTokensList()).data;
	} catch (err) {
		return;
	}
	for (let i = 0; i < tokenList.length; i++) {	
		if (tokenList[i].tokenName == value && value != ChangeToken.currentTokenName) {
			TokenName.Error = "Повторяющиеся имена недопустимы";
			return;
		}
	}
} else {
	TokenName.Error = "Наименование не может иметь пустое значение";
}
]]>
					</body>
				</do-on>
			</object>
			<do-trace access-modifier="private" target="inputTextChanged" ver="5">
				<body>
					<![CDATA[InputText]]>
				</body>
			</do-trace>
		</object>
		<object access-modifier="private" name="TokenDescription" display-name="TokenDescription" uuid="bd95451f-467d-4ebb-a532-99926e45e37b" base-type="InputDialogResult" base-type-id="cdcda119-652b-45ed-bfc4-8cc21b98730d" ver="4"/>
		<do access-modifier="private" name="TokenInputDialogClearData" display-name="TokenInputDialogClearData" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
			<body kind="om">
				<![CDATA[TokenName.InputText = "";
TokenName.Error = "";
TokenName.Value ="";

TokenDescription.InputText = "";
TokenDescription.Error = "";
TokenDescription.Value ="";

ChangeToken.currentTokenName = "";]]>
			</body>
		</do>
	</object>
	<object access-modifier="private" name="RightsEditor" display-name="RightsEditor" uuid="98cd77ff-7c12-4302-b47f-3d16e90cffb3" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="4">
		<designed target="X" value="0" ver="4"/>
		<designed target="Y" value="30" ver="4"/>
		<designed target="ZValue" value="0" ver="4"/>
		<designed target="Rotation" value="0" ver="4"/>
		<designed target="Scale" value="1" ver="4"/>
		<designed target="Visible" value="true" ver="4"/>
		<designed target="Opacity" value="1" ver="4"/>
		<designed target="Enabled" value="true" ver="4"/>
		<designed target="Tooltip" value="" ver="4"/>
		<designed target="Width" value="840" ver="4"/>
		<designed target="Height" value="370" ver="4"/>
		<designed target="RoundingRadius" value="0" ver="4"/>
		<designed target="PenColor" value="4278190080" ver="4"/>
		<designed target="PenStyle" value="0" ver="4"/>
		<designed target="PenWidth" value="1" ver="4"/>
		<designed target="BrushColor" value="4278190080" ver="4"/>
		<designed target="BrushStyle" value="0" ver="4"/>
		<object access-modifier="private" name="Table_1" display-name="Table_1" uuid="81d031c2-4e51-4294-adc4-9b08af9c684d" base-type="Table" base-type-id="c65ff4dc-f22b-47d3-9333-72c4e4e5f662" ver="2">
			<designed target="X" value="0" ver="2"/>
			<designed target="Y" value="0" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Width" value="850" ver="2"/>
			<designed target="Height" value="370" ver="2"/>
			<designed target="SelectionBehavior" value="1" ver="2"/>
			<designed target="SelectionMode" value="1" ver="2"/>
			<object access-modifier="private" name="IdColumn" display-name="IdColumn" uuid="8c7c12c6-e5e4-4d0f-ac42-d4a7304937bc" base-type="TableColumn" base-type-id="109c05c5-8dcf-4a8f-aedd-5bb547cca2d4" ver="2">
				<designed target="Title" value="ID" ver="2"/>
				<designed target="Description" value="" ver="2"/>
				<designed target="Id" value="tokenID" ver="2"/>
				<designed target="BackgroundColor" value="4293980400" ver="2"/>
				<designed target="ForegroundColor" value="4278190080" ver="2"/>
				<designed target="Font" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="TitleBackgroundColor" value="4293980400" ver="2"/>
				<designed target="TitleForegroundColor" value="4278190080" ver="2"/>
				<designed target="TitleFont" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="Width" value="20" ver="2"/>
				<designed target="WidthResizeMode" value="0" ver="2"/>
				<designed target="Emptiable" value="true" ver="2"/>
				<designed target="Hidden" value="true" ver="2"/>
				<designed target="NumberFormat" value="%d" ver="2"/>
				<designed target="TimeFormat" value="dd.MM.yyyy hh:mm:ss.zzz" ver="2"/>
				<designed target="TextAlignment" value="129" ver="3"/>
				<designed target="JsonFilter" value="" ver="3"/>
				<designed target="SortingEnabled" value="false" ver="3"/>
				<designed target="SortOrder" value="0" ver="3"/>
				<designed target="SortPriority" value="0" ver="3"/>
				<designed target="WordWrap" value="false" ver="3"/>
				<designed target="TitleTextAlignment" value="132" ver="3"/>
				<designed target="SortMode" value="0" ver="3"/>
				<designed target="ColumnOwnId" value="" ver="4"/>
			</object>
			<object access-modifier="private" name="TypeColumn" display-name="TypeColumn" uuid="9ee23250-643c-4ad3-a752-bda3d41b1d34" base-type="TableColumn" base-type-id="109c05c5-8dcf-4a8f-aedd-5bb547cca2d4" ver="2">
				<designed target="Title" value="Тип" ver="2"/>
				<designed target="Description" value="" ver="2"/>
				<designed target="Id" value="tokenType" ver="2"/>
				<designed target="BackgroundColor" value="4293980400" ver="2"/>
				<designed target="ForegroundColor" value="4278190080" ver="2"/>
				<designed target="Font" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="TitleBackgroundColor" value="4293980400" ver="2"/>
				<designed target="TitleForegroundColor" value="4278190080" ver="2"/>
				<designed target="TitleFont" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="Width" value="75" ver="2"/>
				<designed target="WidthResizeMode" value="0" ver="2"/>
				<designed target="Emptiable" value="true" ver="2"/>
				<designed target="Hidden" value="false" ver="2"/>
				<designed target="NumberFormat" value="%d" ver="2"/>
				<designed target="TimeFormat" value="dd.MM.yyyy hh:mm:ss.zzz" ver="2"/>
				<designed target="TextAlignment" value="129" ver="3"/>
				<designed target="JsonFilter" value="" ver="3"/>
				<designed target="SortingEnabled" value="false" ver="3"/>
				<designed target="SortOrder" value="0" ver="3"/>
				<designed target="SortPriority" value="0" ver="3"/>
				<designed target="WordWrap" value="false" ver="3"/>
				<designed target="TitleTextAlignment" value="132" ver="3"/>
				<designed target="SortMode" value="0" ver="3"/>
				<designed target="ColumnOwnId" value="" ver="4"/>
			</object>
			<object access-modifier="private" name="NameColumn" display-name="NameColumn" uuid="7ee758f9-2c52-4230-826b-c98ff70b783f" base-type="TableColumn" base-type-id="109c05c5-8dcf-4a8f-aedd-5bb547cca2d4" ver="2">
				<designed target="Title" value="Право" ver="2"/>
				<designed target="Description" value="" ver="2"/>
				<designed target="Id" value="tokenName" ver="2"/>
				<designed target="BackgroundColor" value="4293980400" ver="2"/>
				<designed target="ForegroundColor" value="4278190080" ver="2"/>
				<designed target="Font" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="TitleBackgroundColor" value="4293980400" ver="2"/>
				<designed target="TitleForegroundColor" value="4278190080" ver="2"/>
				<designed target="TitleFont" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="Width" value="300" ver="2"/>
				<designed target="WidthResizeMode" value="0" ver="2"/>
				<designed target="Emptiable" value="true" ver="2"/>
				<designed target="Hidden" value="false" ver="2"/>
				<designed target="NumberFormat" value="%d" ver="2"/>
				<designed target="TimeFormat" value="dd.MM.yyyy hh:mm:ss.zzz" ver="2"/>
				<designed target="TextAlignment" value="129" ver="3"/>
				<designed target="JsonFilter" value="" ver="3"/>
				<designed target="SortingEnabled" value="false" ver="3"/>
				<designed target="SortOrder" value="0" ver="3"/>
				<designed target="SortPriority" value="0" ver="3"/>
				<designed target="WordWrap" value="false" ver="3"/>
				<designed target="TitleTextAlignment" value="132" ver="3"/>
				<designed target="SortMode" value="0" ver="4"/>
				<designed target="ColumnOwnId" value="" ver="4"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="MouseDoubleClick">
					<body kind="om">
						<![CDATA[Commands.DoChangeToken = true;]]>
					</body>
				</do-on>
			</object>
			<designed target="HeaderHeight" value="21" ver="3"/>
			<designed target="HeaderVisible" value="true" ver="3"/>
			<designed target="RowHeight" value="30" ver="3"/>
			<designed target="RowOrder" value="0" ver="3"/>
			<designed target="LatestRowTracking" value="false" ver="3"/>
			<object access-modifier="private" name="DescriptionColumn" display-name="DescriptionColumn" uuid="687e0a2c-e76d-405f-9007-3ce204cf5777" base-type="TableColumn" base-type-id="109c05c5-8dcf-4a8f-aedd-5bb547cca2d4" ver="2">
				<designed target="Title" value="Описание" ver="2"/>
				<designed target="Description" value="" ver="2"/>
				<designed target="Id" value="tokenDescription" ver="2"/>
				<designed target="BackgroundColor" value="4293980400" ver="2"/>
				<designed target="ForegroundColor" value="4278190080" ver="2"/>
				<designed target="Font" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="TitleBackgroundColor" value="4293980400" ver="2"/>
				<designed target="TitleForegroundColor" value="4278190080" ver="2"/>
				<designed target="TitleFont" value="PT Sans,8,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
				<designed target="Width" value="350" ver="2"/>
				<designed target="WidthResizeMode" value="0" ver="2"/>
				<designed target="Emptiable" value="true" ver="2"/>
				<designed target="Hidden" value="false" ver="2"/>
				<designed target="NumberFormat" value="%d" ver="2"/>
				<designed target="TimeFormat" value="dd.MM.yyyy hh:mm:ss.zzz" ver="2"/>
				<designed target="TextAlignment" value="129" ver="3"/>
				<designed target="JsonFilter" value="" ver="3"/>
				<designed target="SortingEnabled" value="false" ver="3"/>
				<designed target="SortOrder" value="0" ver="3"/>
				<designed target="SortPriority" value="0" ver="3"/>
				<designed target="WordWrap" value="false" ver="3"/>
				<designed target="TitleTextAlignment" value="132" ver="3"/>
				<designed target="SortMode" value="0" ver="4"/>
				<designed target="ColumnOwnId" value="" ver="4"/>
			</object>
			<designed target="SelectionOverlayEnabled" value="true" ver="3"/>
			<object access-modifier="private" name="TableDecorator_1" display-name="TableDecorator_1" uuid="a44121de-ae25-4017-8390-f3f61f14d987" base-type="TableDecorator" base-type-id="2ff6a2d7-9573-4060-bfea-29c63d61b079" ver="3">
				<designed target="JsonDecorator" value="" ver="3"/>
			</object>
			<designed target="HorizontalScrollMode" value="0" ver="4"/>
			<designed target="VerticalScrollMode" value="0" ver="4"/>
			<designed target="HorizontalScrollBarPolicy" value="0" ver="4"/>
			<designed target="VerticalScrollBarPolicy" value="0" ver="4"/>
			<designed target="DelayedSortingEnabled" value="false" ver="4"/>
			<init target="TableModel" ver="4" ref="InMemoryTable"/>
			<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="CurrentChanged">
				<body kind="om">
					<![CDATA[if (row >= 0 && row < GetRowCount()){
	private.SelectedRow = row;
} else {
	private.SelectedRow = -1;
}]]>
				</body>
			</do-on>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="SelectionChanged">
				<body kind="om">
					<![CDATA[if (Table_1.GetSelectedRows() == "[]" || Table_1.GetSelectedRows() == "" ) 
{
	private.SelectedRow = -1;
}]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="DebugTool_1" display-name="DebugTool_1" uuid="cb87e6c0-e50c-4653-9197-e5fa00ffaea9" base-type="DebugTool" base-type-id="43946044-139a-43f4-a7b8-19a6074ffc56" ver="2"/>
		<do access-modifier="private" name="GetJsonDecorator" display-name="GetJsonDecorator" ver="5" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
			<body kind="javascript">
				<![CDATA[var Object = {};
Object.Formatting = [];
Object.Decorating = [];
Object.StyleDictionary = [];

var tokenType_format = {};
tokenType_format[`formatting_rule_name`] = "tokenType_format";
tokenType_format[`formatting_column`] = "tokenType";
tokenType_format[`conditions`] = [];
tokenType_format[`conditions`].push({'condition':{'data:tokenType': 'bool'},'text':'логическое'});
tokenType_format[`conditions`].push({'condition':{'data:tokenType': 'string'},'text':'строковое'});
Object.Formatting.push(tokenType_format);

var boolDecorating = {};
boolDecorating[`decoration_rule_name`] = "bool_decorating";
boolDecorating[`decoration_rule`] = {'data:tokenType': 'bool'};
boolDecorating[`columnstyle`] = {'tokenType':"boolStyle"};
Object.Decorating.push(boolDecorating);

var stringDecorating = {};
stringDecorating[`decoration_rule_name`] = "string_decorating";
stringDecorating[`decoration_rule`] = {'data:tokenType': 'string'};
stringDecorating[`columnstyle`] = {'tokenType':"stringStyle"};
Object.Decorating.push(stringDecorating);

var boolStyle = {};
boolStyle[`style_name`] = "boolStyle";
boolStyle[`style`] = {'background_color':'#ffddddff'};
Object.StyleDictionary.push(boolStyle);

var stringStyle = {};
stringStyle[`style_name`] = "stringStyle";
stringStyle[`style`] = {'background_color':'#fff3d3b4'};
Object.StyleDictionary.push(stringStyle);

return JSON.stringify(Object, null, 2);]]>
			</body>
		</do>
		<object access-modifier="private" name="LayoutWeight" display-name="LayoutWeight" uuid="e2650574-db42-45dd-91e4-56facf5a9844" base-type="LayoutWeight" base-type-id="8f3d975c-9645-4288-9406-a8dda0527008" ver="4">
			<designed target="Weight" value="370" ver="4"/>
		</object>
		<object access-modifier="private" name="InMemoryTable" display-name="InMemoryTable" uuid="236e9d05-86f7-4253-a9a8-56137e2fed46" base-type="TableModel" base-type-id="32b2875b-ee3e-454d-bcbb-40806a49273c" ver="3">
			<designed target="Frozen" value="false" ver="3"/>
			<designed target="MaxRowCount" value="100000" ver="3"/>
			<do access-modifier="private" name="InitTable" display-name="InitTable" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
				<body kind="om">
					<![CDATA[Reset();
AddColumn("tokenID","","","","string",false,true);
AddColumn("tokenType","","","","string",false,true);
AddColumn("tokenName","","","","string",false,true);
AddColumn("tokenDescription","","","","string",false,true);
Clear();
]]>
				</body>
			</do>
		</object>
		<object access-modifier="private" name="LinearLayout_1" display-name="LinearLayout_1" uuid="0584dd9a-d554-4c47-8580-e3f791493914" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="4">
			<designed target="Orientation" value="1" ver="4"/>
			<designed target="Gap" value="0" ver="4"/>
		</object>
	</object>
	<object access-modifier="private" name="LinearLayout_1" display-name="LinearLayout_1" uuid="ddd0f49f-2f32-40ab-85b0-5b4211e7f3ee" base-type="LinearLayout" base-type-id="800edd71-7303-408c-890b-8346e98f5718" ver="4">
		<designed target="Orientation" value="2" ver="4"/>
		<designed target="Gap" value="1" ver="4"/>
	</object>
	<object access-modifier="private" name="Application" display-name="Application" uuid="ff78c01f-b717-4cf2-9e5b-abd920600a17" base-type="SecurityManagerApplication" base-type-id="cfc3985c-54fc-4fe4-b001-cade048d6ee0" ver="4">
		<designed target="ApplicationName" value="" ver="4"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="LoadComplete">
			<body kind="om">
				<![CDATA[private.LoadAppRightsToTable(GetTokensList());
	Commands.DoCreateBoolToken.CanExecute = true;
	Commands.DoCreateStringToken.CanExecute = true;
	
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
		<init target="SecurityManager" ver="4">
			<object access-modifier="private" uuid="80143eb2-2446-482d-9c5a-97660c624000" base-type="SecurityManager" base-type-id="179958e0-f45a-40f3-9668-98e4ea2987da" ver="4">
				<init target="SecurityContext" ver="4">
					<object access-modifier="private" uuid="c43df949-a075-42a7-bd7c-d429c8869139" base-type="SecurityContext" base-type-id="d9cb0fff-b70a-4e2d-833d-3f73cf74e0dd" ver="4"/>
				</init>
			</object>
		</init>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="5" event="LoadFailed">
			<body kind="om">
				<![CDATA[header.AppNameText.Text = "Ошибка загрузки приложения";
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_3" display-name="Handler_3" ver="5" event="SaveFailed">
			<body kind="om">
				<![CDATA[ShowErrorWindow.message = GetErrorDescriptionByCode(FailReasonCode);
ShowErrorWindow.Invoke();
SystemCommands.GoTo.doUnblockingControll();]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="5" event="SaveComplete">
			<body kind="om">
				<![CDATA[private.LoadAppRightsToTable(Application.GetTokensList());
private.Save.needSave = false;
SystemCommands.GoTo = SystemCommands.GoTo.frameCode != SystemCommands.GoTo.AppEdit;
SystemCommands.GoTo.doUnblockingControll();
]]>
			</body>
		</do-on>
	</object>
	<object access-modifier="private" name="ShowErrorWindow" display-name="ShowErrorWindow" uuid="f55f37a2-1f3e-40e6-9ca6-74829ded5557" base-type="Action" base-type-id="a9ee9770-1c4a-44c9-b815-157d9fc2ab95" ver="4">
		<designed target="Enabled" value="true" ver="4"/>
		<designed target="InvokeTrigger" value="false" ver="4"/>
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="5" event="Invoked" form-action="open-dialog" form-by-id="false">
			<object access-modifier="private" uuid="4eba5bd2-9b9a-4b15-9916-4cd715fab7e2" base-type="MessageDialog" base-type-id="a468f863-f603-4768-ad4b-e16bc34ea78e" ver="4">
				<init target="Message" ver="4" ref="message"/>
				<init target="Buttons" ver="4" value="0"/>
				<init target="Icon" ver="4" value="3"/>
				<designed target="WindowCaption" value="Ошибка" ver="4"/>
			</object>
		</do-on>
		<object access-modifier="private" name="message" display-name="message" uuid="931d9745-edfc-4ba5-8597-8a7e854d2b5f" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="4"/>
	</object>
	<object access-modifier="private" name="inputAppID" display-name="inputAppID" uuid="02df1b32-9927-4635-99f6-92ee6956b86f" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="4"/>
	<object access-modifier="private" name="Commands" display-name="Commands" uuid="7bd6ae28-33c3-4380-b6c8-0948182dc3a6" base-type="ApplicationCommands" base-type-id="1bb4857b-5e24-4e31-a011-db8a88827b94" base-const="true" base-ref="true" ver="4"/>
	<do access-modifier="private" name="UpdateLayout" display-name="UpdateLayout" ver="5" type="void" type-id="cfbbcafa-e13e-4354-a33a-6e57b818e4da">
		<body kind="om">
			<![CDATA[Width = WindowWidth;
Height = WindowHeight;
RightsEditor.LayoutWeight = Height - header.LayoutWeight;
RightsEditor.Width = Width;
header.Width =Width;
header.UpdateLayout();]]>
		</body>
	</do>
	<object access-modifier="private" name="SystemCommands" display-name="SystemCommands" uuid="f956869b-b49e-4fa3-b739-bf649d66bf8d" base-type="SystemCommands" base-type-id="0b754dab-38c6-43db-a050-37201965421c" base-const="true" base-ref="true" ver="4"/>
	<designed target="WindowIconPath" value="" ver="5"/>
</type>

